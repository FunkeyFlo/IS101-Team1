package view.manager;

import connectivity.QueryManager;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.List;
import java.util.ResourceBundle;
import javax.swing.JOptionPane;
import main.Main;
import main.Session;
import model.Luggage;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.CategoryAxis;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.data.category.DefaultCategoryDataset;

/**
 * @author IS101 Team 1
 */
public class Manager extends javax.swing.JFrame {

    private final QueryManager query = new QueryManager();
    private static final Font X_AXIS_FONT = new Font("Verdana", Font.PLAIN, 8);

    private static final ResourceBundle BUNDLE
            = ResourceBundle.getBundle("languages.ResourceBundle"); //, locale

    private static final String ALL_LUGGAGE_DATA_GRAPH_NAME
            = BUNDLE.getString("allStatusLuggage");

    private static final String LOST_LUGGAGE_GRAPH_NAME
            = BUNDLE.getString("missingLuggage");

    private static final String FOUND_LUGGAGE_GRAPH_NAME
            = BUNDLE.getString("foundLuggage");

    private static final String HANDLED_LUGGAGE_GRAPH_NAME
            = BUNDLE.getString("handledLuggage");

    private static final String[] MONTHS = {BUNDLE.getString("Jan"),
        BUNDLE.getString("Feb"), BUNDLE.getString("Mar"), BUNDLE.getString("Apr"),
        BUNDLE.getString("May"), BUNDLE.getString("Jun"), BUNDLE.getString("Jul"),
        BUNDLE.getString("Aug"), BUNDLE.getString("Sep"), BUNDLE.getString("Oct"),
        BUNDLE.getString("Nov"), BUNDLE.getString("Dec")};

    private static final String X_AXIS_NAME = BUNDLE.getString("xAxis");
    private static final String Y_AXIS_NAME = BUNDLE.getString("yAxis");

    private static final int FIRST_YEAR = 2010;
    private static final String DATE_LOST_COLUMN = "date_lost";
    private static final String DATE_FOUND_COLUMN = "date_found";
    private static final String DATE_HANDLED_COLUMN = "date_handled";

    //transparant background, gives it the same color as the panel it is in.
    private static final Color TRANS = new Color(0xFF, 0xFF, 0xFF, 0);

    public Manager() 
    {
        initComponents();
        int CURRENT_YEAR = getCurrentYear();
        //1 = January, 12 = December
        setAllDataGraph(CURRENT_YEAR, CURRENT_YEAR, 1, 12, false);
        setLostLuggageGraph(CURRENT_YEAR, CURRENT_YEAR, 1, 12, false);
        setFoundLuggageGraph(CURRENT_YEAR, CURRENT_YEAR, 1, 12, false);
        setHandledLuggageGraph(CURRENT_YEAR, CURRENT_YEAR, 1, 12);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        overviewPane = new javax.swing.JTabbedPane();
        allGraphsTab = new javax.swing.JPanel();
        allGraphs = new javax.swing.JPanel();
        lostBaggageTab = new javax.swing.JPanel();
        lostBaggage = new javax.swing.JPanel();
        foundBaggageTab = new javax.swing.JPanel();
        foundBaggage = new javax.swing.JPanel();
        handledBaggageTab = new javax.swing.JPanel();
        handledBaggage = new javax.swing.JPanel();
        optionPanel = new javax.swing.JPanel();
        errorLabel = new javax.swing.JLabel();
        dateFromPanel = new javax.swing.JPanel();
        yearFromLabel = new javax.swing.JLabel();
        monthFromLabel = new javax.swing.JLabel();
        cbMonthFrom = new javax.swing.JComboBox();
        cbYearFrom = new javax.swing.JComboBox();
        dateToPanel = new javax.swing.JPanel();
        buttonUpdateAllDataGraph = new javax.swing.JButton();
        cbMonthTo = new javax.swing.JComboBox();
        monthToLabel = new javax.swing.JLabel();
        yearToLabel = new javax.swing.JLabel();
        cbYearTo = new javax.swing.JComboBox();
        labelError = new javax.swing.JLabel();
        statusOptionPanel = new javax.swing.JPanel();
        cbShowAll = new javax.swing.JCheckBox();
        chShowAllExtra = new javax.swing.JLabel();
        menuBar = new javax.swing.JMenuBar();
        userMenu = new javax.swing.JMenu();
        changePassword = new javax.swing.JMenuItem();
        logout = new javax.swing.JMenuItem();

        jLabel1.setText("ingelogd als gebruiker");

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle(BUNDLE.getString("manager") + " - " + Session.storedFirstName + " " + Session.storedLastName);

        allGraphs.setBorder(javax.swing.BorderFactory.createTitledBorder(BUNDLE.getString("allData")));
        allGraphs.setLayout(new java.awt.GridBagLayout());

        javax.swing.GroupLayout allGraphsTabLayout = new javax.swing.GroupLayout(allGraphsTab);
        allGraphsTab.setLayout(allGraphsTabLayout);
        allGraphsTabLayout.setHorizontalGroup(
            allGraphsTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(allGraphsTabLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(allGraphs, javax.swing.GroupLayout.DEFAULT_SIZE, 732, Short.MAX_VALUE)
                .addContainerGap())
        );
        allGraphsTabLayout.setVerticalGroup(
            allGraphsTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(allGraphsTabLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(allGraphs, javax.swing.GroupLayout.DEFAULT_SIZE, 415, Short.MAX_VALUE)
                .addContainerGap())
        );

        overviewPane.addTab(BUNDLE.getString("allData"), allGraphsTab);

        lostBaggage.setBorder(javax.swing.BorderFactory.createTitledBorder(BUNDLE.getString("missingLuggage")));
        lostBaggage.setLayout(new java.awt.GridBagLayout());

        javax.swing.GroupLayout lostBaggageTabLayout = new javax.swing.GroupLayout(lostBaggageTab);
        lostBaggageTab.setLayout(lostBaggageTabLayout);
        lostBaggageTabLayout.setHorizontalGroup(
            lostBaggageTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(lostBaggageTabLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(lostBaggage, javax.swing.GroupLayout.DEFAULT_SIZE, 732, Short.MAX_VALUE)
                .addContainerGap())
        );
        lostBaggageTabLayout.setVerticalGroup(
            lostBaggageTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(lostBaggageTabLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(lostBaggage, javax.swing.GroupLayout.DEFAULT_SIZE, 415, Short.MAX_VALUE)
                .addContainerGap())
        );

        overviewPane.addTab(BUNDLE.getString("missingLuggage")
            , lostBaggageTab);

        foundBaggage.setBorder(javax.swing.BorderFactory.createTitledBorder(BUNDLE.getString("foundLuggage")));
        foundBaggage.setLayout(new java.awt.GridBagLayout());

        javax.swing.GroupLayout foundBaggageTabLayout = new javax.swing.GroupLayout(foundBaggageTab);
        foundBaggageTab.setLayout(foundBaggageTabLayout);
        foundBaggageTabLayout.setHorizontalGroup(
            foundBaggageTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(foundBaggageTabLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(foundBaggage, javax.swing.GroupLayout.DEFAULT_SIZE, 732, Short.MAX_VALUE)
                .addContainerGap())
        );
        foundBaggageTabLayout.setVerticalGroup(
            foundBaggageTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(foundBaggageTabLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(foundBaggage, javax.swing.GroupLayout.DEFAULT_SIZE, 415, Short.MAX_VALUE)
                .addContainerGap())
        );

        overviewPane.addTab(BUNDLE.getString("foundLuggage"), foundBaggageTab);

        handledBaggage.setBorder(javax.swing.BorderFactory.createTitledBorder(BUNDLE.getString("handledLuggage")));
        handledBaggage.setLayout(new java.awt.GridBagLayout());

        javax.swing.GroupLayout handledBaggageTabLayout = new javax.swing.GroupLayout(handledBaggageTab);
        handledBaggageTab.setLayout(handledBaggageTabLayout);
        handledBaggageTabLayout.setHorizontalGroup(
            handledBaggageTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(handledBaggageTabLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(handledBaggage, javax.swing.GroupLayout.DEFAULT_SIZE, 732, Short.MAX_VALUE)
                .addContainerGap())
        );
        handledBaggageTabLayout.setVerticalGroup(
            handledBaggageTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(handledBaggageTabLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(handledBaggage, javax.swing.GroupLayout.DEFAULT_SIZE, 415, Short.MAX_VALUE)
                .addContainerGap())
        );

        overviewPane.addTab(BUNDLE.getString("handledLuggage"), handledBaggageTab);

        optionPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(BUNDLE.getString("options")));

        dateFromPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(BUNDLE.getString("from")));

        yearFromLabel.setText(BUNDLE.getString("year"));

        monthFromLabel.setText(BUNDLE.getString("month"));

        cbMonthFrom.setMaximumRowCount(12);
        cbMonthFrom.setModel(new javax.swing.DefaultComboBoxModel(BUNDLE.getStringArray("months")));
        cbMonthFrom.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbMonthFromActionPerformed(evt);
            }
        });

        cbYearFrom.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "2010", "2011", "2012", "2013", "2014" }));

        javax.swing.GroupLayout dateFromPanelLayout = new javax.swing.GroupLayout(dateFromPanel);
        dateFromPanel.setLayout(dateFromPanelLayout);
        dateFromPanelLayout.setHorizontalGroup(
            dateFromPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(dateFromPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(dateFromPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(monthFromLabel)
                    .addComponent(yearFromLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(dateFromPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(cbMonthFrom, 0, 101, Short.MAX_VALUE)
                    .addComponent(cbYearFrom, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        dateFromPanelLayout.setVerticalGroup(
            dateFromPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(dateFromPanelLayout.createSequentialGroup()
                .addGroup(dateFromPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(yearFromLabel)
                    .addComponent(cbYearFrom, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(dateFromPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(monthFromLabel)
                    .addComponent(cbMonthFrom, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(26, Short.MAX_VALUE))
        );

        dateToPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(BUNDLE.getString("to")));

        buttonUpdateAllDataGraph.setText(BUNDLE.getString("update"));
        buttonUpdateAllDataGraph.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonUpdateAllDataGraphActionPerformed(evt);
            }
        });

        cbMonthTo.setMaximumRowCount(12);
        cbMonthTo.setModel(new javax.swing.DefaultComboBoxModel(BUNDLE.getStringArray("months")));

        monthToLabel.setText(BUNDLE.getString("month"));

        yearToLabel.setText(BUNDLE.getString("year"));

        cbYearTo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "2010", "2011", "2012", "2013", "2014" }));
        cbYearTo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbYearToActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout dateToPanelLayout = new javax.swing.GroupLayout(dateToPanel);
        dateToPanel.setLayout(dateToPanelLayout);
        dateToPanelLayout.setHorizontalGroup(
            dateToPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(dateToPanelLayout.createSequentialGroup()
                .addGroup(dateToPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(dateToPanelLayout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(dateToPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(monthToLabel)
                            .addComponent(yearToLabel))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 56, Short.MAX_VALUE)
                        .addGroup(dateToPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(cbMonthTo, 0, 101, Short.MAX_VALUE)
                            .addComponent(cbYearTo, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, dateToPanelLayout.createSequentialGroup()
                        .addComponent(labelError)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(buttonUpdateAllDataGraph)))
                .addContainerGap())
        );
        dateToPanelLayout.setVerticalGroup(
            dateToPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, dateToPanelLayout.createSequentialGroup()
                .addGroup(dateToPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(yearToLabel)
                    .addComponent(cbYearTo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(dateToPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(monthToLabel)
                    .addComponent(cbMonthTo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(dateToPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, dateToPanelLayout.createSequentialGroup()
                        .addComponent(buttonUpdateAllDataGraph)
                        .addContainerGap())
                    .addComponent(labelError, javax.swing.GroupLayout.Alignment.TRAILING)))
        );

        statusOptionPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(BUNDLE.getString("otherOptions")));

        cbShowAll.setText(BUNDLE.getString("seeAllData1"));
        cbShowAll.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbShowAllActionPerformed(evt);
            }
        });

        chShowAllExtra.setText(BUNDLE.getString("seeAllData2"));

        javax.swing.GroupLayout statusOptionPanelLayout = new javax.swing.GroupLayout(statusOptionPanel);
        statusOptionPanel.setLayout(statusOptionPanelLayout);
        statusOptionPanelLayout.setHorizontalGroup(
            statusOptionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(cbShowAll, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(statusOptionPanelLayout.createSequentialGroup()
                .addGap(21, 21, 21)
                .addComponent(chShowAllExtra, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        statusOptionPanelLayout.setVerticalGroup(
            statusOptionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(statusOptionPanelLayout.createSequentialGroup()
                .addComponent(cbShowAll)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(chShowAllExtra)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout optionPanelLayout = new javax.swing.GroupLayout(optionPanel);
        optionPanel.setLayout(optionPanelLayout);
        optionPanelLayout.setHorizontalGroup(
            optionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(optionPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(optionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(errorLabel)
                    .addGroup(optionPanelLayout.createSequentialGroup()
                        .addGroup(optionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(dateFromPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(statusOptionPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(dateToPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        optionPanelLayout.setVerticalGroup(
            optionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, optionPanelLayout.createSequentialGroup()
                .addGroup(optionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(optionPanelLayout.createSequentialGroup()
                        .addComponent(dateFromPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(statusOptionPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addComponent(dateToPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(errorLabel))
        );

        userMenu.setText(BUNDLE.getString("options"));

        changePassword.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/changePassword.png"))); // NOI18N
        changePassword.setText(BUNDLE.getString("changePassword"));
        changePassword.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                changePasswordActionPerformed(evt);
            }
        });
        userMenu.add(changePassword);

        logout.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/logout.png"))); // NOI18N
        logout.setText(BUNDLE.getString("logout"));
        logout.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                logoutActionPerformed(evt);
            }
        });
        userMenu.add(logout);

        menuBar.add(userMenu);

        setJMenuBar(menuBar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(overviewPane)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(optionPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(overviewPane)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(optionPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    /**
     * Creates the graph for that will display all the luggage.
     *
     * @param beginYear year where the graph starts, as specified by the user
     * @param endYear year where the graph ends
     * @param beginMonth month in the year where the graph starts
     * @param endMonth month in the year where the graph ends
     */
    private void setAllDataGraph(int beginYear, int endYear,
            int beginMonth, int endMonth, boolean showAll) 
    {
        DefaultCategoryDataset allDataGraph
                = new DefaultCategoryDataset();
        allDataGraph.clear();
        
        //Counts number of luggage instances for the user specified months
        List<Integer> countLost = query.countLuggage(DATE_LOST_COLUMN,1,
                beginYear,beginMonth,endYear,endMonth,showAll);
        List<Integer> countFound = query.countLuggage(DATE_FOUND_COLUMN,2,
                beginYear,beginMonth,endYear,endMonth,showAll);
        List<Integer> countHandled = query.countLuggage(DATE_HANDLED_COLUMN,3,
                beginYear,beginMonth,endYear,endMonth,showAll);
        
        int numMonths = giveNumMonths(beginYear, endYear,beginMonth, endMonth);
        ArrayList<String> xAxisLabels = giveXaxisLabels(numMonths, beginMonth,
                beginYear);

        for (int i = 0; i < xAxisLabels.size(); i++) {
            //all graphs
            allDataGraph.setValue(countLost.get(i),
                    LOST_LUGGAGE_GRAPH_NAME, xAxisLabels.get(i));
            allDataGraph.setValue(countFound.get(i),
                    FOUND_LUGGAGE_GRAPH_NAME, xAxisLabels.get(i));
            allDataGraph.setValue(countHandled.get(i),
                    HANDLED_LUGGAGE_GRAPH_NAME, xAxisLabels.get(i));
        }

        //creates the graph
        JFreeChart allGraphsChart = ChartFactory.createLineChart(
                ALL_LUGGAGE_DATA_GRAPH_NAME, X_AXIS_NAME, Y_AXIS_NAME,
                allDataGraph);

        //Gets the plot so it can be modified
        CategoryPlot allGraphsPlot = allGraphsChart.getCategoryPlot();
        CategoryAxis xAxis = allGraphsPlot.getDomainAxis();
        xAxis.setTickLabelFont(X_AXIS_FONT);
        //Tells the graph to only use whole numbers
        NumberAxis XAxis = (NumberAxis) allGraphsPlot.getRangeAxis();
        XAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

        //Colors the graph
        allGraphsPlot.setRangeGridlinePaint(Color.BLACK);
        ChartPanel lostBaggagePanel = new ChartPanel(allGraphsChart);
        allGraphsChart.setBackgroundPaint(TRANS);

        //applies the graph to the panel
        allGraphs.setLayout(new BorderLayout());
        allGraphs.add(lostBaggagePanel, BorderLayout.CENTER);
        allGraphs.validate();

    }

    /**
     * Creates the graph for all lost luggage data
     *
     * @param beginYear year where the graph starts, as specified by the user
     * @param endYear year where the graph ends
     * @param beginMonth month in the year where the graph starts
     * @param endMonth month in the year where the graph ends
     */
    private void setLostLuggageGraph(int beginYear, int endYear,
            int beginMonth, int endMonth, boolean dontShowAll) 
    {
        DefaultCategoryDataset lostBaggageGraph
                = new DefaultCategoryDataset();
        lostBaggageGraph.clear();

        //Counts number of lost luggage instances for the user specified months
        List<Integer> countLost = query.countLuggage(DATE_LOST_COLUMN,1,
                beginYear,beginMonth,endYear,endMonth,dontShowAll);
        
        int numMonths = giveNumMonths(beginYear, endYear,beginMonth, endMonth);
        ArrayList<String> xAxisLabels = giveXaxisLabels(numMonths, beginMonth,
                beginYear);

        for (int i = 0; i < numMonths; i++) {
            lostBaggageGraph.setValue(countLost.get(i),
                    LOST_LUGGAGE_GRAPH_NAME, xAxisLabels.get(i));
        }

        JFreeChart lostBaggageChart = ChartFactory.createLineChart(
                LOST_LUGGAGE_GRAPH_NAME, X_AXIS_NAME, Y_AXIS_NAME,
                lostBaggageGraph);

        //Gets the plot so it can be modified
        CategoryPlot lostBaggagePlot = lostBaggageChart.getCategoryPlot();
        CategoryAxis xAxis = lostBaggagePlot.getDomainAxis();
        xAxis.setTickLabelFont(X_AXIS_FONT);
        //Tells the graph to only use whole numbers
        NumberAxis numberAxis = (NumberAxis) lostBaggagePlot.getRangeAxis();
        numberAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

        //Colors the graph
        lostBaggagePlot.setRangeGridlinePaint(Color.BLACK);
        ChartPanel lostBaggagePanel = new ChartPanel(lostBaggageChart);
        lostBaggageChart.setBackgroundPaint(TRANS);

        //Applies the graph to the panel
        lostBaggage.setLayout(new BorderLayout());
        lostBaggage.add(lostBaggagePanel, BorderLayout.CENTER);
        lostBaggage.validate();

    }

    /**
     * Creates the graph for all found luggage data
     *
     * @param beginYear the year where the graph begins, as specified by the
     * user
     * @param endYear the year where the graph ends
     * @param beginMonth the month in the year where the graph begins
     * @param endMonth the month in the year where the graph ends
     */
    private void setFoundLuggageGraph(int beginYear, int endYear,
            int beginMonth, int endMonth, boolean dontShowAll) 
    {
        DefaultCategoryDataset foundBaggageGraph
                = new DefaultCategoryDataset();
        foundBaggageGraph.clear();

        List<Integer> countHandled = query.countLuggage(DATE_FOUND_COLUMN,2,
                beginYear,beginMonth,endYear,endMonth,dontShowAll);

        //Counts number of found luggage instances for the user specified months
        int numMonths = giveNumMonths(beginYear, endYear, beginMonth, endMonth);
        ArrayList<String> xAxisLabels = giveXaxisLabels(numMonths, beginMonth,
                beginYear);

        //sets data
        for (int i = 0; i < numMonths; i++) {
            foundBaggageGraph.setValue(countHandled.get(i),
                    FOUND_LUGGAGE_GRAPH_NAME, xAxisLabels.get(i));
        }

        //creates graph
        JFreeChart foundBaggageChart = ChartFactory.createLineChart(
                FOUND_LUGGAGE_GRAPH_NAME, X_AXIS_NAME, Y_AXIS_NAME,
                foundBaggageGraph);

        //Gets the plot so it can be modified
        CategoryPlot foundBaggagePlot = foundBaggageChart.getCategoryPlot();
        CategoryAxis xAxis = foundBaggagePlot.getDomainAxis();
        xAxis.setTickLabelFont(X_AXIS_FONT);
        //Tells the graph to only use whole numbers
        NumberAxis numberAxis = (NumberAxis) foundBaggagePlot.getRangeAxis();
        numberAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

        //Colors the graph
        foundBaggagePlot.setRangeGridlinePaint(Color.BLACK);
        ChartPanel foundBaggagePanel = new ChartPanel(foundBaggageChart);
        foundBaggageChart.setBackgroundPaint(new Color(0xFF, 0xFF, 0xFF, 0));
        foundBaggageChart.setBackgroundPaint(TRANS);

        //applies graph to panel
        foundBaggage.setLayout(new BorderLayout());
        foundBaggage.add(foundBaggagePanel, BorderLayout.CENTER);
        foundBaggage.validate();
    }

    /**
     * Creates the graph for all handled luggage data
     *
     * @param beginYear the year where the graph starts, as specified by the
     * user
     * @param endYear the year where the graph ends
     * @param beginMonth the month in the year where the graph begins
     * @param endMonth the month in the year where the graph ends
     */
    private void setHandledLuggageGraph(int beginYear, int endYear,
            int beginMonth, int endMonth) 
    {
        DefaultCategoryDataset handledBaggageGraph
                = new DefaultCategoryDataset();
        handledBaggageGraph.clear();

        List<Integer> countHandled = query.countLuggage(DATE_HANDLED_COLUMN,3,
                beginYear,beginMonth,endYear,endMonth,true);
        
        //Counts number of handled luggage instances for the specified months
        int numMonths = giveNumMonths(beginYear, endYear,
                beginMonth, endMonth);
        ArrayList<String> xAxisLabels = giveXaxisLabels(numMonths, beginMonth,
                beginYear);

        //sets data
        for (int i = 0; i < numMonths; i++) {
            handledBaggageGraph.setValue(countHandled.get(i),
                    HANDLED_LUGGAGE_GRAPH_NAME, xAxisLabels.get(i));
        }

        //creates graph
        JFreeChart handledBaggageChart = ChartFactory.createLineChart(
                HANDLED_LUGGAGE_GRAPH_NAME, X_AXIS_NAME, Y_AXIS_NAME,
                handledBaggageGraph);

        //Gets the plot so it can be modified
        CategoryPlot handledBaggagePlot = handledBaggageChart.getCategoryPlot();
        CategoryAxis xAxis = handledBaggagePlot.getDomainAxis();
        xAxis.setTickLabelFont(X_AXIS_FONT);
        //Tells the graph to only use whole numbers
        NumberAxis numberAxis = (NumberAxis) handledBaggagePlot.getRangeAxis();
        numberAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

        //Colors the graph
        handledBaggagePlot.setRangeGridlinePaint(Color.BLACK);
        ChartPanel handledBaggagePanel = new ChartPanel(handledBaggageChart);
        handledBaggageChart.setBackgroundPaint(TRANS);

        //applies graph to panel
        handledBaggage.setLayout(new BorderLayout());
        handledBaggage.add(handledBaggagePanel, BorderLayout.CENTER);
        handledBaggage.validate();
    }


    private void cbYearToActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbYearToActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cbYearToActionPerformed

    /**
     * Gets months and years the user would like to view luggage data in, and
     * gives them as parameters to all set graph methods.
     *
     * @param evt
     */
    private void buttonUpdateAllDataGraphActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonUpdateAllDataGraphActionPerformed
        int yearFrom = cbYearFrom.getSelectedIndex() + FIRST_YEAR,
                yearTo = cbYearTo.getSelectedIndex() + FIRST_YEAR,
                monthFrom = cbMonthFrom.getSelectedIndex() + 1,
                monthTo = cbMonthTo.getSelectedIndex() + 1;
        boolean dontShowAll = !(cbShowAll.isSelected());
        if (yearFrom > yearTo) {
            errorPopUp(BUNDLE.getString("beginDate"));
        } else {
            setAllDataGraph(yearFrom, yearTo, monthFrom, monthTo,
                    dontShowAll);
            setLostLuggageGraph(yearFrom, yearTo, monthFrom, monthTo,
                    dontShowAll);
            setFoundLuggageGraph(yearFrom, yearTo, monthFrom, monthTo,
                    dontShowAll);
            setHandledLuggageGraph(yearFrom, yearTo, monthFrom, monthTo);
        }
    }//GEN-LAST:event_buttonUpdateAllDataGraphActionPerformed

    private void cbShowAllActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbShowAllActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cbShowAllActionPerformed

    private void changePasswordActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_changePasswordActionPerformed
        Main.displayChangePassword();
    }//GEN-LAST:event_changePasswordActionPerformed

    private void logoutActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_logoutActionPerformed
        dispose();
        Main.displayLogin();
    }//GEN-LAST:event_logoutActionPerformed

    private void cbMonthFromActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbMonthFromActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cbMonthFromActionPerformed

    /**
     * @return amount of months between begin year and month and end year and
     * month.
     */
    private static int giveNumMonths(int beginYear, int endYear,
            int beginMonth, int endMonth) 
    {
        //if the last year is also the begin year, the number of years the graph
        //must account for is one. If the begin year is less than the last year,
        //one year will be added since the number of years the graph must
        //account for with the years 2012, 2013 is two, not one.
        int numYears = endYear - beginYear == 0
                ? 1 : (endYear - beginYear) + 1;
        int numMonths = ((numYears * 12) - beginMonth) - (12 - endMonth) + 1;
        return numMonths;
    }

    /**
     * Generates labels for the X axis based on what months and years will be
     * show in the graph.
     * @param numMonths number of months the method must generate strings for
     * @param beginMonth first month a string must be generated for
     * @param beginYear last month a string must be generated for
     * @return String ArrayList containing a month and year (format: MMM 'YY)
     */
    private ArrayList<String> giveXaxisLabels(int numMonths, int beginMonth,
            int beginYear) 
    {
        ArrayList<String> xAxisLabels = new ArrayList<>();
        numMonths += beginMonth;
        beginYear -= 2000;
        int currentMonth = beginMonth;
        for (int i = beginMonth; i < numMonths; i++) {
            if (currentMonth >= 13) {
                currentMonth = 1;
                beginYear++;
            }
            switch (currentMonth) {
                case 1:
                    xAxisLabels.add(MONTHS[0] + " '" + beginYear);
                    break;
                case 2:
                    xAxisLabels.add(MONTHS[1] + " '" + beginYear);
                    break;
                case 3:
                    xAxisLabels.add(MONTHS[2] + " '" + beginYear);
                    break;
                case 4:
                    xAxisLabels.add(MONTHS[3] + " '" + beginYear);
                    break;
                case 5:
                    xAxisLabels.add(MONTHS[4] + " '" + beginYear);
                    break;
                case 6:
                    xAxisLabels.add(MONTHS[5] + " '" + beginYear);
                    break;
                case 7:
                    xAxisLabels.add(MONTHS[6] + " '" + beginYear);
                    break;
                case 8:
                    xAxisLabels.add(MONTHS[7] + " '" + beginYear);
                    break;
                case 9:
                    xAxisLabels.add(MONTHS[8] + " '" + beginYear);
                    break;
                case 10:
                    xAxisLabels.add(MONTHS[9] + " '" + beginYear);
                    break;
                case 11:
                    xAxisLabels.add(MONTHS[10] + " '" + beginYear);
                    break;
                case 12:
                    xAxisLabels.add(MONTHS[11] + " '" + beginYear);
                    break;
                default:
                    xAxisLabels.add("? '?");
                    break;
            }
            currentMonth++;
        }
        return xAxisLabels;
    }

    /**
     * Used in the graphs to display information of the current year at startup.
     *
     * @return the current year.
     */
    private static int getCurrentYear() 
    {
        return Calendar.getInstance().get(Calendar.YEAR);
    }

    private void errorPopUp(String errorMessage) 
    {
        Component errorPopUp = null;
        JOptionPane.showMessageDialog(errorPopUp, errorMessage, "Error", JOptionPane.ERROR_MESSAGE);
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel allGraphs;
    private javax.swing.JPanel allGraphsTab;
    private javax.swing.JButton buttonUpdateAllDataGraph;
    private javax.swing.JComboBox cbMonthFrom;
    private javax.swing.JComboBox cbMonthTo;
    private javax.swing.JCheckBox cbShowAll;
    private javax.swing.JComboBox cbYearFrom;
    private javax.swing.JComboBox cbYearTo;
    private javax.swing.JLabel chShowAllExtra;
    private javax.swing.JMenuItem changePassword;
    private javax.swing.JPanel dateFromPanel;
    private javax.swing.JPanel dateToPanel;
    private javax.swing.JLabel errorLabel;
    private javax.swing.JPanel foundBaggage;
    private javax.swing.JPanel foundBaggageTab;
    private javax.swing.JPanel handledBaggage;
    private javax.swing.JPanel handledBaggageTab;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel labelError;
    private javax.swing.JMenuItem logout;
    private javax.swing.JPanel lostBaggage;
    private javax.swing.JPanel lostBaggageTab;
    private javax.swing.JMenuBar menuBar;
    private javax.swing.JLabel monthFromLabel;
    private javax.swing.JLabel monthToLabel;
    private javax.swing.JPanel optionPanel;
    private javax.swing.JTabbedPane overviewPane;
    private javax.swing.JPanel statusOptionPanel;
    private javax.swing.JMenu userMenu;
    private javax.swing.JLabel yearFromLabel;
    private javax.swing.JLabel yearToLabel;
    // End of variables declaration//GEN-END:variables

}